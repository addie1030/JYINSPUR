<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <template id="assets_backend" name="account assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/ps_account_asset/static/src/js/depreciation_details.js"></script>
            </xpath>
        </template>

        <record id="ps_account_asset.depreciation_details_view" model="ir.actions.client">
            <field name="name">Depreciation Details</field>
            <field name="tag">depreciation_details_report</field>
            <field name="context" eval="{'model': 'ps.depreciation.details.report'}" />
        </record>

        <menuitem id="menu_depreciation_details_view"
          name="Depreciation Details sheet"
          parent="ps_account_asset.menu_account_asset_report"
          sequence="19"
          action="ps_account_asset.depreciation_details_view" groups="account.group_account_manager"/>

        <template id="template_depreciation_details_report" inherit_id="ps_account.main_template" primary="True">
            <xpath expr="//tbody" position="replace">
                <t t-if="lines.get('lines')">
                    <t t-call="ps_account_asset.template_depreciation_details_line_report" />
                </t>
            </xpath>
        </template>

        <!--部门控件-->
        <template id="search_account_analytic">
        <a type="button" class="dropdown-toggle" data-toggle="dropdown">
                <span class="fa fa-filter"/> Department:
                <span class="caret"/>
            </a>
            <ul class="dropdown-menu o_filters_menu" role="menu" style="padding-left:5px;padding-right:5px;">
                <li style="margin-top:3px">
                    <label for="account_analytic_from">Department :</label>
                    <br/>
                    <select class="js_account_asset_account_analytic" style="min-width: 140px;" name="account_analytic_from" data-filter="account_analytic_from">
                        <t t-foreach="options['account_analyticList']" t-as="a">
                            <option t-att-value="a['id']"><t t-esc="a['name']" /></option>
                        </t>
                    </select>
                </li>
                <li class="divider" style="margin-top:3px"></li>
                <li style="margin-top:3px">
                    <button type="button" class="btn btn-primary js_account_asset_account_analytic_filter" data-filter="level">Apply</button>
                </li>
            </ul>
        </template>
        <!--资产类型控件-->
        <template id="search_asset_type">
        <a type="button" class="dropdown-toggle" data-toggle="dropdown">
                <span class="fa fa-filter"/> Type:
                <span class="caret"/>
            </a>
            <ul class="dropdown-menu o_filters_menu" role="menu" style="padding-left:5px;padding-right:5px;">
                <li style="margin-top:3px">
                    <label for="asset_type_from">Type :</label>
                    <br/>
                    <select class="js_asset_type" style="min-width: 140px;" name="asset_type_from" data-filter="asset_type_from">
                        <t t-foreach="options['asset_typeList']" t-as="a">
                            <option t-att-value="a['id']"><t t-esc="a['name']" /></option>
                        </t>
                    </select>
                </li>
                <li class="divider" style="margin-top:3px"></li>
                <li style="margin-top:3px">
                    <button type="button" class="btn btn-primary js_asset_type_filter" data-filter="level">Apply</button>
                </li>
            </ul>
        </template>
        <template id="search_template_asset">
            <div class="btn-group o_dropdown o_account_reports_filter_date" t-if="options.get('date') != None">
                <t t-call="ps_account.search_template_date">
                </t>
            </div>
            <div class="btn-group o_dropdown o_account_reports_filter_account_analytic" t-if="options.get('account_analytic') != None">
                <t t-call="ps_account_asset.search_account_analytic"/>
            </div>
            <div class="btn-group o_dropdown o_account_reports_filter_asset_type" t-if="options.get('asset_type') != None">
                <t t-call="ps_account_asset.search_asset_type"/>
            </div>
        </template>

        <template id="template_depreciation_details_line_report" inherit_id="ps_account.line_template" primary="True">
            <xpath expr="//span[hasclass('placeholder')]" position="before">
                <t t-foreach="row['columns']" t-as="line">
                    <tr style="height:36px;background:#eee">
                        <td style="text-align:left;vertical-align:middle;padding-left:5px;">
                            <t t-esc="line['Asset Category']"></t>
                        </td>
                        <td style="text-align:left;vertical-align:middle;padding-left:5px;">
                            <t t-esc="line['Department']"></t>
                        </td>
                        <td style="text-align:left;vertical-align:middle;padding-left:5px;">
                            <t t-esc="line['Asset Code']"></t>
                        </td>
                        <td style="text-align:left;vertical-align:middle;padding-left:5px;">
                            <t t-esc="line['Asset']"></t>
                        </td>
                        <td style="text-align:left;vertical-align:middle;padding-left:5px;">
                            <t t-esc="line['Depreciation Date']"></t>
                        </td>
                        <td style="text-align:left;vertical-align:middle;padding-left:5px;">
                            <t t-esc="line['Depreciation']"></t>
                        </td>
                        <td style="text-align:left;vertical-align:middle;padding-left:5px;">
                            <t t-esc="line['Cumulative Depreciation']"></t>
                        </td>
                        <td style="text-align:left;vertical-align:middle;padding-left:5px;">
                            <t t-esc="line['Asset Value']"></t>
                        </td>
                        <td style="text-align:left;vertical-align:middle;padding-left:5px;">
                            <t t-esc="line['Residual Value']"></t>
                        </td>
                    </tr>
                </t>
            </xpath>
        </template>

    </data>
</odoo>