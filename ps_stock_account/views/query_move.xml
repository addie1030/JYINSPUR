<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- 查询凭证 START -->
        <!--增加搜索条件-->
        <record id="view_stock_account_move_search" model="ir.ui.view">
            <field name="name">account.move.search</field>
            <field name="model">account.move</field>
            <field name="arch" type="xml">
                <search string="">
                    <filter string="Stock Move" domain="[('ps_move_origin','=','stock_move')]" name="search_by_from_stock"/>
                    <separator/>
                    <filter name="search_posted" string="Posted" domain="[('state','=','posted')]"/>
                    <filter name="search_checked" string="Checked" domain="[('state','=','checked')]"/>
                    <filter name="search_draft" string="Draft" domain="[('state','=','draft')]" />
                </search>
            </field>
        </record>

        <record id="view_stock_account_move_tree" model="ir.ui.view">
            <field name="name">account.move.view</field>
            <field name="model">account.move</field>
            <field name="arch" type="xml">
                <tree create="false">
                    <field name="date" />
                    <field name="name" />
                    <field name="ref" />
                    <field name="journal_id"/>
                    <field name="ps_voucher_name" />
                    <field name="amount" />
                    <field name="create_uid" />
                    <field name="ps_move_origin" invisible="1" />
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id='action_window_query_created_move_action' model='ir.actions.act_window'>
            <field name='name'>Move List</field>
            <field name="res_model">account.move</field>
            <field name='view_mode'>tree</field>
            <field name="context">
                {'search_default_search_by_from_stock':1, 'remove_name': 'ps_list_actions_delete'}
            </field><!--默认搜索-->
            <field name='view_id' ref='view_stock_account_move_tree'/>
            <field name="search_view_id" ref="view_stock_account_move_search"/>
        </record>
        <!-- 查询生成凭证 END -->
        <menuitem name="Query Move" id="ps_stock_account.query_move"
                  sequence="3"
                  parent="ps_account_center.menu_root" action="action_window_query_created_move_action"
                  groups="account.group_account_manager"/>
    </data>
</odoo>
