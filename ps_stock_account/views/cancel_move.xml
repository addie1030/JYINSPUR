<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- 取消生成凭证 START -->

        <!--增加搜索条件-->
        <record id="view_stock_move_created_search" model="ir.ui.view">
            <field name="name">ps.stock.account.china.center.cancel.move.search</field>
            <field name="model">ps.stock.account.china.center.cancel.move</field><!--换成 生成凭证的 模型名-->
            <field name="arch" type="xml">
                <search>
                    <group expand="0" string="Group By">
                        <filter string="picking type" name="group_by_picking_type_id"
                                context="{'group_by': 'picking_type_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="view_stock_move_created_tree" model="ir.ui.view">
            <field name="name">Cancel Move</field>
            <field name="model">ps.stock.account.china.center.cancel.move</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="reference"/>
                    <field name="picking_type_id"/>
                    <field name="partner_id"/>
                    <field name="origin"/>
                    <field name="date"/>
                    <field name="account_move_id" invisible="1"/>
                    <field name="id" invisible="1"/>
                    <field name="state" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id='action_window_cancel_created_move_action' model='ir.actions.act_window'>
            <field name='name'>Stock Move List</field>
            <field name="res_model">ps.stock.account.china.center.cancel.move</field>
            <field name='view_mode'>tree</field>
            <field name="context">{'search_default_group_by_picking_type_id':1, 'remove_name': 'ps_list_actions_delete'}</field><!--默认搜索名，默认分组名-->
            <field name='view_id' ref='view_stock_move_created_tree'/>
            <!--这里增加过滤搜索条件-->
            <field name="search_view_id" ref="view_stock_move_created_search"/>
        </record>
        <!-- 取消生成凭证 END -->
        <menuitem name="Stock Cancel Move" id="ps_stock_account.cancel_move"
                  sequence="2"
                  parent="ps_account_center.menu_root" action="action_window_cancel_created_move_action"
                  groups="account.group_account_manager"/>
    </data>
</odoo>
