@function o-theme-color($name) {
    $-tmp: theme-color($name);
    @return if($-tmp, $-tmp, color($name));
}

@mixin fa-size-generator($base-size) {
    .fa {
        text-align: center;
        display: inline-block;
        vertical-align: middle;
    }
    .fa,
    .fa.fa-1x {
        width: ($base-size + 20px);
        height: ($base-size + 20px);
        line-height: ($base-size + 20px);
    }
    .fa.fa-2x {
        width: ($base-size + 40px);
        height: ($base-size + 40px);
        line-height: ($base-size + 40px);
    }
    .fa.fa-3x {
        width: ($base-size + 60px);
        height: ($base-size + 60px);
        line-height: ($base-size + 60px);
    }
    .fa.fa-4x {
        width: ($base-size + 80px);
        height: ($base-size + 80px);
        line-height: ($base-size + 80px);
    }
    .fa.fa-5x {
        width: ($base-size + 100px);
        height: ($base-size + 100px);
        line-height: ($base-size + 100px);
    }
}

@mixin blockquote-layout($bg-color, $color) {
    blockquote {
        font-style: italic;
        margin: 0 0 12px 0;
        padding: 0;
        border: 0;
        > .fa,
        > span .fa {
            float: left;
        }
        @include fa-size-generator(20px);
        img {
            display: inline-block;
            max-width: 40px;
            max-height: 40px;
        }
        small {
            display: inline-block;
            color: $color;
        }
        .blockquote-text {
            overflow: hidden;
            font-size: $font-size-base;
            text-align: left;
            &:focus{
                outline: none;
            }
        }
        p {
            background-color: $bg-color;
            color: $color;
            padding: 24px;
        }
    }
}

@mixin carousel-control($position, $fa-position, $fa-padding) {
    opacity: 1;
    text-shadow: none;
    color: gray('900');
    font-size: inherit;
    width: 5%;
    .fa {
        top: 50%;
        background-color: #fff;
        &:hover {
            color: theme-color('alpha');
        }
        @include media-breakpoint-down(sm) {
            top: auto;
            bottom: 0;
        }
    }
    @include fa-size-generator(20px);
    &.left {
        background-image: none;
        left: $position;
        .fa {
            left: $fa-position;
            right: auto;
            padding-right: $fa-padding;
        }
    }
    &.right {
        background-image: none;
        right: $position;
        .fa {
            right: $fa-position;
            left: auto;
            padding-left: $fa-padding;
        }
    }
}

@mixin PlaceholderStyle($color) {
    ::-webkit-input-placeholder { /* WebKit browsers */
        color: $color;
    }
    :-moz-placeholder { /* Mozilla Firefox 4 to 18 */
        color: $color;
        opacity: 1;
    }
    ::-moz-placeholder { /* Mozilla Firefox 19+ */
        color: $color;
        opacity: 1;
    }
    :-ms-input-placeholder { /* Internet Explorer 10+ */
        color: $color;
    }
}

//------------------------------------------------------------------------------
// Themes specific style.
//
// This was introduced as a post-stable-12.0 review. The goal is to regroup
// similar block of scss code (accross different theme) in theme_common
// mixins which are then simply called in the related themes. This will ease
// stable fixes and master refactorings.
//------------------------------------------------------------------------------

@mixin o-theme-responsive-spacing-classes($lg, $md, $sm, $xs) {
    @include media-breakpoint-down(lg) {
        @include o-spacing-all($lg);
    }
    @include media-breakpoint-down(md) {
        @include o-spacing-all($md);
    }
    @include media-breakpoint-down(sm) {
        @include o-spacing-all($sm);
    }
    @include media-breakpoint-down(xs) {
        @include o-spacing-all($xs);
    }
}

@mixin o-theme-cfa-bg-img-classes(
        $bg1: $o-theme-bg-img-01, $bg2: $o-theme-bg-img-02, $bg3: $o-theme-bg-img-03,
        $bg4: $o-theme-bg-img-04, $bg5: $o-theme-bg-img-05, $bg6: $o-theme-bg-img-06,
        $bg7: $o-theme-bg-img-07) {
    %cfa-bg-img {
        background-size: cover;
        background-position: center center;
    }
    .bg-img-01 {
        @extend %cfa-bg-img;
        background-image: $bg1;
    }
    .bg-img-02 {
        @extend %cfa-bg-img;
        background-image: $bg2;
    }
    .bg-img-03 {
        @extend %cfa-bg-img;
        background-image: $bg3;
    }
    .bg-img-04 {
        @extend %cfa-bg-img;
        background-image: $bg4;
    }
    .bg-img-05 {
        @extend %cfa-bg-img;
        background-image: $bg5;
    }
    .bg-img-06 {
        @extend %cfa-bg-img;
        background-image: $bg6;
    }
    .bg-img-07 {
        @extend %cfa-bg-img;
        background-image: $bg7;
    }
}

// This is probably to deprecate
@mixin o-theme-cfa-px-classes() {
    .px14 {
        font-size: 14px !important;
        line-height: 25px;
    }
    .px16 {
        font-size: 16px !important;
        line-height: 28px;
    }
    .px18 {
        font-size: 18px !important;
        line-height: 30px;
    }
    .px22 {
        font-size: 22px !important;
        line-height: 32px;
    }
    .px30 {
        font-size: 30px !important;
        line-height: 30px;
    }
    .px36 {
        font-size: 36px !important;
        line-height: 36px;
    }
    .px42 {
        font-size: 42px !important;
        line-height: 42px;
    }
    .px50 {
        font-size: 50px !important;
        line-height: 50px;
    }
    .px60 {
        font-size: 60px !important;
        line-height: 60px;
    }
}

@mixin o-theme-cfa-btn-main-style() {
    .btn {
        padding: 10px 20px;
        border-radius: 0px;
        transition: all 0.3s ease-out;
        border-width: 0px;
    }
}

@mixin o-theme-cfa-btn-style() {
    @include o-theme-cfa-btn-main-style();

    .btn {
        // TODO this is not very consistent but this was how the theme was
        // designed... should we keep this ?
        @each $color, $alias in ('success': 'epsilon', 'info': 'gamma', 'warning': 'delta') {
            &.btn-#{$color} {
                @include button-variant(theme-color($alias), theme-color($alias));
            }
            &.btn-outline-#{$color} {
                @include button-outline-variant(theme-color($alias));
            }
        }
        &.btn-danger {
            @include button-variant(gray('black'), gray('black'));
        }
        &.btn-outline-danger {
            @include button-outline-variant(gray('black'), gray('black'));
        }
    }
}

@mixin o-theme-cfa-header-shadows() {
    .bg-100, .bg-200, .bg-300, .bg-400, .bg-500, .bg-600, .bg-700, .bg-800, .bg-900 {
        h1, h2, h3, h4, h5, h6 {
            text-shadow: 0px 2px 0px $black;
        }
    }
}

@mixin o-theme-cfa-header-responsive-sizes() {
    @include media-breakpoint-down(sm) {
        h1 {
            font-size: 30px;
        }
        h2 {
            font-size: 26px;
        }
        h3 {
            font-size: 22px;
        }
    }
}

@mixin o-theme-cfa-custom-form-control($with-color: true, $with-focus-border-width: true) {
    box-shadow: none;
    border-top-width: 0px;
    border-left-width: 0px;
    border-right-width: 0px;
    border-radius: 0px;
    @if $with-color {
        color: gray('700');
    }

    &:focus {
        border-bottom-color: gray('700');
        @if $with-focus-border-width {
            border-bottom-width: 2px;
        }
        box-shadow: none;
    }
}

@mixin o-theme-cfa-full-width-styles() {
    #wrapwrap {
        #wrap {
            width: 100%;
            max-width: 100%;
            margin: auto;
        }
        .navbar > .container {
            max-width: 100%;
        }
    }
    #footer {
        width: 100%;
    }
}

@mixin o-theme-cfa-card-classes($font-size: $h4-font-size, $color: o-theme-color('epsilon'), $border-color: gray('200')) {
    .card-header {
        background-color: rgba(0, 0, 0, 0) !important;
        border: none;
        color: $color !important;
        font-size: $font-size;
    }
    .card-footer {
        background: rgba(0, 0, 0, 0);
    }
    .card {
        text-align: center;
        border: none;
        box-shadow: none;
        border: 1px solid $border-color;
        border-radius: 0px;
        .list-group-item {
            background: rgba(0, 0, 0, 0);
            border-color: $border-color;
        }
    }
}

@mixin o-theme-cfa-nav-pills-styles($color: gray('600'),
    $active-color: o-theme-color('epsilon'), $active-bg: rgba(0, 0, 0, 0),
    $badge-color: o-theme-color('alpha'), $badge-bg: o-theme-color('epsilon')) {
    .nav-pills .nav-link {
        color: $color;
        &:hover {
            color: gray('700');
        }
        &.active {
            color: $active-color !important;
            background: $active-bg !important;
            &:hover {
                background-color: gray('200');
                color: gray('700') !important;
            }
            .badge {
                color: $badge-color;
                background-color: $badge-bg;
            }
        }
    }
}

@mixin o-theme-cfa-website-blog-styles($border: 0, $text-transform: none) {
    .website_blog {
        #blog_right_column {
            border-left: $border;
            padding: 0 15px 35px 30px;
            h4 {
                text-transform: $text-transform;
            }
        }
        .col-md-8 {
            padding: 0 15px 30px 35px;
        }
        .post-meta {
            margin-top: 20px;
            text-align: left;
        }
        .blog_title .post-meta {
                text-align: center;
        }
        #main_column {
            h4 {
                font-size: 18px;
            }
            h2 {
                font-size: 25px;
            }
        }
    }
}

@mixin o-theme-chd-bg-img-classes(
        $bg1: $o-theme-bg-img-01, $bg2: $o-theme-bg-img-02, $bg3: $o-theme-bg-img-03,
        $bg4: $o-theme-bg-img-04, $bg5: $o-theme-bg-img-05, $bg6: $o-theme-bg-img-06,
        $bg7: $o-theme-bg-img-07, $bg8: $o-theme-bg-img-08, $bg9: $o-theme-bg-img-09,
        $bg10: $o-theme-bg-img-10, $bg11: $o-theme-bg-img-11, $bg12: $o-theme-bg-img-12,
        $font-color: white) {
    %chd-bg-img {
        background-size: cover;
        .fa, h1, h2, h3, h4, h5, h6, p  {
            color: $font-color;
        }
        .text-muted {
            color: theme-color('alpha');
        }
    }
    .bg-img-01 {
        @extend %chd-bg-img;
        background-image: $bg1;
    }
    .bg-img-02 {
        @extend %chd-bg-img;
        background-image: $bg2;
    }
    .bg-img-03 {
        @extend %chd-bg-img;
        background-image: $bg3;
    }
    .bg-img-04 {
        @extend %chd-bg-img;
        background-image: $bg4;
    }
    .bg-img-05 {
        @extend %chd-bg-img;
        background-image: $bg5;
    }
    .bg-img-06 {
        @extend %chd-bg-img;
        background-image: $bg6;
    }
    .bg-img-07 {
        @extend %chd-bg-img;
        background-image: $bg7;
    }
    .bg-img-08 {
        @extend %chd-bg-img;
        background-image: $bg8;
    }
    .bg-img-09 {
        @extend %chd-bg-img;
        background-image: $bg9;
    }
    .bg-img-10 {
        @extend %chd-bg-img;
        background-image: $bg10;
    }
    .bg-img-11 {
        @extend %chd-bg-img;
        background-image: $bg11;
    }
    .bg-img-12 {
        @extend %chd-bg-img;
        background-image: $bg12;
    }
}

@mixin o-theme-chd-bg-gradient-classes() {
    .bg_gradient_primary_down {
        background-image: linear-gradient( rgba(theme-color('primary'), 0), rgba(theme-color('primary'), 1) ),;
    }
    .bg_gradient_primary_up {
        background-image: linear-gradient( rgba(theme-color('primary'), 1), rgba(theme-color('primary'), 0) ),;
    }
    .bg_gradient_white_down_thumb {
        background-image: linear-gradient( rgba(#ccc, 1), rgba(white, 0.5) ),;
    }
    .bg_gradient_white_down {
        background-image: linear-gradient( rgba(white, 0), rgba(white, 0.5) ),;
    }
    .bg_gradient_white_up_thumb {
        background-image: linear-gradient( rgba(white, 0.5), rgba(#ccc, 1) ),;
    }
    .bg_gradient_white_up {
        background-image: linear-gradient( rgba(white, 0.5), rgba(white, 0) ),;
    }
    .bg_gradient_black_up {
        background-image: linear-gradient( rgba(black, 0.5), rgba(black, 0) ),;
    }
    .bg_gradient_black_down {
        background-image: linear-gradient( rgba(black, 0), rgba(black, 0.5) ),;
    }
}

@mixin o-theme-chd-bg-option-menu-styles() {
    .bg_option_menu_img, .bg_option_menu_gradient {
        height: 25px;
        width: 120px;
        border: 1px solid #ccc;
    }
}

@mixin o-theme-chd-padding-l-r-classes() {
    .padding-l-r-8 {
        padding: 0 8px;
    }
    .padding-l-r-16 {
        padding: 0 16px;
    }
    .padding-l-r-32 {
        padding: 0 32px;
    }
}

@mixin o-theme-chd-footer-styles() {
    p {
        text-align: justify;
    }
    .fa:not(.fa-2x):not(.fa-3x):not(.fa-4x):not(.fa-5x) {
        font-size: 18px;
    }
}

@mixin o-theme-sri-bg-effects-styles(
    $opacity: 1, $border-top: 2px solid #fff, $border-bottom: 2px solid #848484,
    $background: linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(241, 241, 241, 0.5) 50%, rgba(225, 225, 225, 0.5) 51%, rgba(246, 246, 246, 0.5) 100%)) {

    position: relative;
    opacity: 0.999; // Force stacking context creation
    &:before {
        content: "";
        z-index: -1;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        position: absolute;
        display: block;
        opacity: $opacity;
        background: $background;
        border-top: $border-top;
        border-bottom: $border-bottom;
    }
}

@mixin o-theme-sri-bg-effects-classes() {
    .glossy {
        @include o-theme-sri-bg-effects-styles($border-top: 2px solid rgba(255, 255, 255, 0.73), $border-bottom: 1px solid rgba(155, 155, 155, 0.73));
    }
    .glossy-medium {
        @include o-theme-sri-bg-effects-styles($opacity: 0.7);
    }
    .glossy-soft {
        @include o-theme-sri-bg-effects-styles($opacity: 0.3);
    }
    .insetShadow {
        @include o-theme-sri-bg-effects-styles(
            $background: linear-gradient(to bottom, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 50%, rgba(0, 0, 0, 0.2) 100%),
            $border-top: 0, $border-bottom: 0);
    }
    .insetShadowBig {
        @include o-theme-sri-bg-effects-styles(
            $background: linear-gradient(to bottom, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.2) 50%,rgba(0, 0, 0, 0.4) 100%),
            $border-top: 0, $border-bottom: 0);
    }
}

@mixin o-theme-sri-bg-styles($std-url, $x, $y, $body-color, $url-2x) {
    background-image: $std-url!important;
    background-position: $x $y;
    background-repeat: no-repeat;
    background-size: cover;
    color: $body-color;

    @media
    only screen and (-webkit-min-device-pixel-ratio: 2),
    only screen and (   min--moz-device-pixel-ratio: 2),
    only screen and (     -o-min-device-pixel-ratio: 2/1),
    only screen and (        min-device-pixel-ratio: 2),
    only screen and (                min-resolution: 192dpi),
    only screen and (                min-resolution: 2dppx) {
        background-image: $url-2x!important;
    }
}

@mixin o-theme-sri-bg-image-styles($img, $body-color: white, $shadow-color : rgba(255, 0, 0, 0), $x: 50%, $y: 50%) {
    @include o-theme-sri-bg-styles(url("#{$o-theme-img-base-url}#{$img}"), $x, $y, $body-color, url("#{$o-theme-img-base-url}#{$o-theme-pattern-2x-prefix}#{$img}"));
    text-shadow: 0 1px 1px transparentize($shadow-color, 0.4);
}

@mixin o-theme-sri-bg-pattern-styles($img, $body-color: white, $x: 50%, $y: 50%) {
    @include o-theme-sri-bg-styles(url("#{$o-theme-pattern-base-url}#{$img}"), $x, $y, $body-color, url("#{$o-theme-pattern-base-url}#{$o-theme-img-2x-prefix}#{$img}"));
}

@mixin o-theme-sri-bg-img-thumb-classes($backgrounds) {
    @each $name, $image in $backgrounds {
        .#{$name}-thumb {
            background-image: url("#{$o-theme-thumb-base-url}#{$image}") !important;
            background-position: center center;
            background-size: cover;
        }
    }
}

@mixin o-theme-sri-ecommerce-classes() {
    // GENERAL
    .oe_website_sale .wizard {
        font-weight: bold;
    }
    // PRODUCTS' LIST
    #products_grid {
        div.oe_product {
            padding-bottom: 15px;
            padding-top: 10px;

            &:nth-child(odd) {
                background: rgba(black, 0.015);
            }
            &:first-child {
                border-top: 1px solid rgba(black, 0.1);
            }
        }
        td.oe_product, div.oe_product .oe_product_image  {
            padding: 5px;
        }
    }
    // PPRODUCTS CATEGORIES
    #products_grid_before > ul > li {
        &:first-child {
            margin-bottom: 10px;
        }
        > a {
            font-weight: bold;
            margin-top: 5px;
        }
    }
    // PPRODUCT PAGE
    #product_detail {
        > .row:first-of-type{
            margin-bottom: 36px;
        }
        form .form-control, form .input-group .btn {
            height: 36px;
        }
        #product_details {
            position: relative;

            &:before {
                content: "";
                width: 1px;
                background-color: gray('200');
                height: 100%;
                @include o-position-absolute(0, auto, 0, -10%);
            }
            > h1 {
                margin: 0 0 20px;
            }
            #add_to_cart {
                background-color: theme-color('success');
                border: 1px solid theme-color('success');
                text-transform: uppercase;
                font-size: 14px;
                font-weight: bold;
                padding: 8px 22px;
            }
            hr:first-of-type{
                display: none;
            }
            // LIST VIEW OF VARIANTS
            .js_product > label > input{
                position: relative;
                margin: 0 10px 0 0;
            }
            // PRODUCTS'S VARIANTS
            ul.js_add_cart_variants {
                margin-bottom: 20px;
                display: table;
                width: 100%;

                > li {
                    display: block;
                    > strong {
                        font-size: 0.9em;
                        display: block;
                        opacity: 0.7;
                        padding: 0;
                        margin-top: 20px;
                    }
                    > ul {
                        display: block;
                        padding-left: 0;
                        margin-left: 0;

                        &.list-unstyled > label {
                            margin: 0!important;
                        }
                        &.list-inline {
                            li {
                                padding-left: 0;
                            }
                            label.css_attribute_color {
                                opacity: 0.8;
                                cursor: pointer;
                                border: 1px solid gray('600');
                                box-shadow: inset 0 0 0 2px #fff;
                                border-radius: 2px;

                                input {
                                    cursor: pointer;
                                    margin: 1px;
                                    width: 18px;
                                }
                                &.active {
                                    opacity: 1;
                                    border: 2px solid #55e58e;
                                }
                                &:hover {
                                    opacity: 1;
                                }
                            }
                        }
                    }
                }
            }
            @include media-breakpoint-up(md) {
                .css_quantity {
                    float: left;
                }
                #add_to_cart {
                    margin-top: 0!important;
                    margin-left: 10px;
                }
                ul.js_add_cart_variants > li {
                    display: table-row;
                    > strong, > ul {
                        display: table-cell;
                    }
                }
            }
            .product_price h4 {
                border-top: 1px solid #eee;
                font-size: 35px;
                margin-top: 25px;
                padding-top: 10px;
            }
        }
    }
}

@mixin o-theme-nmi-website-forum-classes($border-radius, $navbar-brand-color, $padding,
    $hover-bg-color, $hover-color, $active-bg-color) {
    .navbar {
        padding-top: 0;
        padding-bottom: 0;
        border-radius: $border-radius;
        .navbar-brand {
            padding: 18px;
            font-weight: $font-weight-bold;
            color: $navbar-brand-color;
        }
        .navbar-nav .nav-link {
            &:hover {
                background-color: $hover-bg-color;
                color: $hover-color;
            }
            &.active, &:focus {
                background-color: $active-bg-color;
                color: $hover-bg-color;
            }
        }
    }
    .input-group .form-control {
        height: auto;
        padding: $padding;
        color: gray('900');
        @include border-left-radius(20px);

        + .input-group-append button {
            padding: 6px 20px;
        }
    }
    + #wrap {
        // Ask a question - Button
        .btn-group .btn {
            padding: 6px 12px;
            @include border-right-radius(0);
            &.dropdown-toggle {
                @include border-left-radius(0);
                @include border-right-radius(20px);
            }
        }
        // Ask a question - Editor icons
        .btn-toolbar .btn {
            background-color: rgba(0, 0, 0, 0);
            color: #000;
            border-radius: 0;
            &.dropdown-toggle {
                border-radius: 0;
            }
        }
    }
}

@mixin o-theme-nmi-bg-pattern-classes($o-theme-bg-patterns) {
    @for $i from 1 through length($o-theme-bg-patterns) {
        .bg-pattern-0#{$i}{
            background-image: nth($o-theme-bg-patterns, $i);
            background-repeat: repeat !important;
            background-size: inherit !important;
        }
    }
}

@mixin o-theme-nmi-bg-image-classes($o-theme-bg-imgs, $bg-size) {
    @for $i from 1 through length($o-theme-bg-imgs) {
        $j: $i;
        @if $i < 10 { $j: 0#{$i}; }
        .bg-img-#{$j}{
            background: nth($o-theme-bg-imgs, $i) !important;
            background-repeat: no-repeat !important;
            background-size: $bg-size !important;
        }
    }
}

@mixin o-theme-nmi-wrapwrap-styles($shadow-class, $border-radius) {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    background-color: rgba(0, 0, 0, 0);

    p:not(.s_share) a:not(.btn) {
        text-decoration: underline;
    }
    .readable {
        padding: 0 30px;
        .container {
            width: auto;
        }
    }
    .shadow {
        border-bottom: 5px solid gray('900');
        &.#{$shadow-class} {
            border-bottom-color: #000;
        }
    }
    .text-underline {
        text-decoration: underline;
    }
    .text-boxed {
        border: 1px solid;
        border-color: inherit;
        padding: 20px;
        border-radius: $border-radius;
    }
}
