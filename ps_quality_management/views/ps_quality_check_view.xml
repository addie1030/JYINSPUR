<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="quality_check_form_view" model="ir.ui.view">
            <field name="name">quality_check_form_view</field>
            <field name="model">quality.check</field>
            <field name="priority">0</field>
            <field name="arch" type="xml">
                <form string="Quality Check">
                    <header>
                        <field name="state" widget="statusbar" statusbar_visible="draft,confirmed,closed,cancel"/>
                    </header>
                    <sheet>
                        <h1 class="d-none d-md-block">
                            <field name="name" readonly="1"/>
                        </h1>
                        <group>
                            <group>
                                <field name="ps_document" attrs="{'invisible':[('id', '>', 0)]}"/>
                                <field name="ps_type_id" attrs="{'invisible':[('id', '>', 0)]}"
                                       options="{'no_create_edit':True}"/>
                            </group>
                            <group>
                                <field name="ps_description" attrs="{'invisible':[('id', '>', 0)]}"/>
                            </group>
                        </group>

                        <group string="check Information">
                            <group>
                                <field name="product_tmpl_id"
                                       attrs="{'readonly': [('state', 'in', ('confirmed','closed', 'cancel'))]}"/>
                                <field name="product_id" options="{'no_create_edit':True}"
                                       groups="product.group_product_variant"
                                       attrs="{'readonly': [('state', 'in', ('confirmed','closed', 'cancel'))]}"/>
                                <field name="test_type" invisible="1"/>
                                <field name="alert_ids" invisible="1"/>
                                <field name="control_date" invisible="1"
                                       attrs="{'readonly': [('state', 'in', ('confirmed','closed', 'cancel'))]}"/>
                                <field name="user_id" string="Control Person" invisible="1"/>
                                <field name="ps_inspection_plan_id" options="{'no_create_edit':True}" required="1"
                                       attrs="{'readonly': [('state', 'in', ('confirmed','closed', 'cancel'))]}"/>
                                <field name="type" options="{'no_create_edit':True}"
                                       attrs="{'readonly': [('state', 'in', ('confirmed','closed', 'cancel'))]}"/>
                                <field name="check_level"
                                       attrs="{'invisible': [('type', 'not in', ['gb'])],'required': [('type', 'in', ['gb'])], 'readonly': [('state', 'in', ('confirmed','closed', 'cancel'))]}"/>
                            </group>
                            <group>

                                <field name="sample_size" attrs="{'invisible': [('type', 'not in', ['gb'])]}"/>
                                <field name="quantity_accept" attrs="{'invisible': [('type', 'not in', ['gb'])]}"/>
                                <field name="quantity_reject" attrs="{'invisible': [('type', 'not in', ['gb'])]}"/>
                                <field name="testing_item_id" options="{'no_create_edit':True}"
                                       attrs="{'readonly': [('state', 'in', ('confirmed','closed', 'cancel'))]}"/>
                                <field name="ps_check_result"/>
                                <field name="ps_check_quantity" readonly="1" force_save="1"/>
                                <field name="ps_qty_ng"/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="is_check_data"/>
                            </group>
                            <group>
                                <field name="ps_failed_qty" attrs="{'invisible':[('is_check_data', '!=', False)]}"/>
                            </group>
                        </group>
                        <div string="Quality Check Data" attrs="{'invisible':[('is_check_data', '=', False)]}">
                            <field name="ps_data_ids"
                                   context="{'testing_item_id': testing_item_id,'ps_inspection_plan_id': ps_inspection_plan_id}"
                                   attrs="{'readonly':[('state', 'not in', ('draft','confirmed'))]}">
                                <tree editable="bottom">
                                    <field name="value_type" readonly="1" force_save="1"/>
                                    <field name="target_value" readonly="1" force_save="1"/>
                                    <field name="target_value_qualitative" widget="many2many_tags" readonly="1"
                                           force_save="1"/>
                                    <field name="standard_value" readonly="1" force_save="1"/>
                                    <field name="lower_limit" readonly="1" force_save="1"/>
                                    <field name="upper_limit" readonly="1" force_save="1"/>
                                    <field name="value_measured"
                                           attrs="{'readonly':[('value_type','!=','quantitative')]}"/>
                                    <field name="qty_qualitative"
                                           attrs="{'readonly':[('value_type','=','quantitative')]}"
                                           options="{'no_create_edit':True}"/>
                                    <field name="qty"/>

                                </tree>
                            </field>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>

    </data>
</odoo>

